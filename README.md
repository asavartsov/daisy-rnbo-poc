# daisy-rnbo-poc

This is a proof-of-concept of running RNBO exported patches on  platform.

Compiled code doesn’t fit into FLASH, but should be fine for SRAM (~130kB for simple stuff with the seed board). Audio IO working just fine (just need to switch to float buffer instead of default double, tried it with vibrato example from “RNBO Pedal Collection”). 

It is barebone project for seed with simple oscillator in gen~ inside RNBO patch.

As it targets SRAM, need to do make program-boot first and then make program-dfu while seed’s led is “breathing”. It will output sweeping frequency from 50Hz to 1kHz (frequency set via RNBO param) that is disturbed by playing sin(2*x) from a short `buffer~`. Led will blink indicating that some MIDI messages are coming from RNBO midiout.

All magic happens in Makefile (-D flags), compat dir and main.cpp. All other stuff autogenerated, libDaisy is in the submodule. Some optional memory management introduced in memmgr dir for allocationg RNBO buffers in SDRAM but it is optional and you can use regular heap, just adjust DaisyPlatform.h to call regular malloc/free or your own memory manager.

With -DRNBO_SIMPLEENGINE flag you don’t need to compile RNBO_Engine.cpp and RNBO_ParameterInterfaceAsync.cpp. 

It uses so-called core engine and sync event processing that don’t use threads or mutexes at all.

It is very dumb and rudimentary example just to prove that this thing can work without Linux or RTOS.


This serves as a proof-of-concept for running RNBO exported patches on the [Electrosmith Daisy Seed](https://www.electro-smith.com/daisy) platform.

The compiled code exceeds the FLASH capacity but fits well within SRAM (approximately 130kB for basic applications using the Seed board). The audio IO functions properly; you simply need to switch to a float buffer instead of the default double. I tested this with the vibrato example from the "RNBO Pedal Collection."

This project is a barebones implementation for the Seed, featuring a simple oscillator in `gen~` within the RNBO patch.

Since it targets SRAM, you must execute `make program-boot` first and then `make program-dfu` while the Seed's LED is in the "breathing" state. This will output a sweeping frequency ranging from 50Hz to 1kHz (frequency set via RNBO param). The signal is disturbed by playing sin(2*x) from a short buffer~. The LED will blink to indicate that some MIDI messages are coming from the RNBO midiout.

All the essential configurations are in the Makefile (-D flags), `compat` directory, and `main.cpp`. `-fexceptions` is obligatory, though it seems that no compiled code use exceptions, image does not run on Seed without it. 

`rnbo/*` and `rnbo_source.cpp` autogenerated and unaltered. `libDaisy` located in the submodule. Optional memory management is introduced in the memmgr directory for allocating RNBO buffers in SDRAM. However, this is optional, and you can use the regular heap; just adjust DaisyPlatform.h to call regular malloc/free or your custom memory manager.

With `-DRNBO_SIMPLEENGINE` flag defined, you don't need to compile `RNBO_Engine.cpp` and `RNBO_ParameterInterfaceAsync.cpp`. This setup employs a core engine and synchronous event processing that doesn't rely on threads or mutexes.

It's a straightforward and rudimentary example, intended to demonstrate that this setup can function without Linux or RTOS.
